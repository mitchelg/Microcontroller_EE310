//This 

    
//Initialization:
    #include "C:\Users\garre\Desktop\Library\8. School\5. Spring 2024\EE 310\Assignment 6 - Heater Cooler\HeaterCooler.X\AssemblyConfig.inc"
    #include <xc.inc>

    PSECT absdata,abs,ovrld
    
    #define heater	PORTD,1
    #define cooler	PORTD,2
    
    refTemp equ		0x20
    measuredTemp equ	0x21
    contReg equ		0x22
 

    ORG          0h
    GOTO        _start
    ORG          20h
    
    
 _start:
    BANKSEL	PORTD
    CLRF	PORTD		//Initializing  PORTD
    BANKSEL	ANSELD
    CLRF	ANSELD
    BANKSEL	TRISD
    MOVLW	0b00000000	//Setting up PORTD as output
    MOVWF	TRISD,0
    MOVLW	45		//Values are in decimal, if no type is specified, decimal is assumed by default
    MOVWF	refTemp,0
    MOVLW	25
    MOVWF	measuredTemp,0
    GOTO	_compare


_compare:
    MOVF    refTemp,W

    CPFSLT	measuredTemp	    //Skip if F < W, aka measured < ref
    GOTO	_heat	

    CPFSGT	measuredTemp
    GOTO	_cool
    
    
_heat:
    MOVLW   2h
    MOVWF   contReg,0
    MOVFF   contReg,PORTD
    
_cool:
    MOVLW   0x04
    MOVWF   contReg,0
    MOVFF   contReg,PORTD
    

END

